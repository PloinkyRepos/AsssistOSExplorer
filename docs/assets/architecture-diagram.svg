<svg viewBox="0 0 1320 460" role="img" aria-labelledby="architecture-diagram-title" xmlns="http://www.w3.org/2000/svg">
  <title id="architecture-diagram-title">Explorer architecture</title>
  <style>
    .node { fill: #0f172a; stroke: #38bdf8; stroke-width: 2; rx: 8; ry: 8; }
    .label { fill: #e2e8f0; font-size: 14px; font-family: Arial, sans-serif; }
    .muted { fill: #94a3b8; font-size: 12px; font-family: Arial, sans-serif; }
    .arrow { stroke: #38bdf8; stroke-width: 2; marker-end: url(#arrowhead); fill: none; }
    .dashed { stroke-dasharray: 6 4; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#38bdf8"></polygon>
    </marker>
  </defs>

  <rect x="40" y="50" width="1240" height="360" fill="none" stroke="#334155" stroke-width="1" stroke-dasharray="10 6"></rect>
  <text class="muted" x="60" y="46">Shared host workspace (mounted into containers)</text>

  <rect class="node" x="60" y="90" width="200" height="100"></rect>
  <text class="label" x="160" y="140" text-anchor="middle">Browser</text>
  <text class="muted" x="160" y="162" text-anchor="middle">WebSkel UI</text>

  <rect class="node" x="320" y="90" width="230" height="100"></rect>
  <text class="label" x="435" y="140" text-anchor="middle">Ploinky Router</text>
  <text class="muted" x="435" y="162" text-anchor="middle">
    <tspan x="435" dy="0">Static + proxy</tspan>
    <tspan x="435" dy="14">(port from start)</tspan>
  </text>

  <rect x="600" y="80" width="260" height="120" fill="none" stroke="#38bdf8" stroke-width="1.5" stroke-dasharray="8 6"></rect>
  <text class="muted" x="730" y="74" text-anchor="middle">Container (Podman/Docker)</text>
  <rect class="node" x="610" y="90" width="240" height="100"></rect>
  <text class="label" x="730" y="136" text-anchor="middle">Explorer Agent</text>
  <text class="muted" x="730" y="158" text-anchor="middle">
    <tspan x="730" dy="0">Container: node:20-alpine</tspan>
    <tspan x="730" dy="14">agent: filesystem-http-server.mjs</tspan>
  </text>

  <rect class="node" x="920" y="90" width="220" height="100"></rect>
  <text class="label" x="1030" y="136" text-anchor="middle">Workspace FS</text>
  <text class="muted" x="1030" y="158" text-anchor="middle">
    <tspan x="1030" dy="0">Allowed roots</tspan>
    <tspan x="1030" dy="14">(ASSISTOS_FS_ROOT)</tspan>
  </text>

  <text class="muted" x="300" y="74">HTTP (assets/UI)</text>
  <line class="arrow" x1="260" y1="170" x2="320" y2="170"></line>

  <text class="muted" x="580" y="74">Static/proxy</text>
  <line class="arrow" x1="550" y1="170" x2="610" y2="170"></line>

  <text class="muted" x="900" y="74">Volume mount (allowed roots)</text>
  <line class="arrow" x1="850" y1="170" x2="920" y2="170"></line>

  <rect class="node" x="610" y="290" width="240" height="100"></rect>
  <text class="label" x="730" y="336" text-anchor="middle">MCP Clients</text>
  <text class="muted" x="730" y="358" text-anchor="middle">Agents/Explorer UI</text>

  <rect x="900" y="260" width="260" height="120" fill="none" stroke="#38bdf8" stroke-width="1.5" stroke-dasharray="8 6"></rect>
  <text class="muted" x="1030" y="254" text-anchor="middle">Container (Podman/Docker)</text>
  <rect class="node" x="910" y="270" width="240" height="100"></rect>
  <text class="label" x="1030" y="316" text-anchor="middle">soplangAgent</text>
  <text class="muted" x="1030" y="338" text-anchor="middle">
    <tspan x="1030" dy="0">Container: node:20-alpine</tspan>
    <tspan x="1030" dy="14">soplang-tool (SoplangBuilder)</tspan>
  </text>

  <text class="muted" x="620" y="266">MCP → Explorer FS tools</text>
  <line class="arrow dashed" x1="730" y1="290" x2="730" y2="190"></line>

  <text class="muted" x="1030" y="236" text-anchor="middle">MCP → soplang-tool</text>
  <line class="arrow dashed" x1="730" y1="290" x2="910" y2="290"></line>

  <line class="arrow" x1="1030" y1="270" x2="1030" y2="190"></line>
</svg>
